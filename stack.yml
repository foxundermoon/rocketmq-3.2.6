version: "3.7"
services:
  rocket-name:
    image: foxundermoon/rocketmq-3.2.6
    command:
      - sh
      - /app/bin/mqnamesrv
    networks:
      - rocket
  rocket-broker:
    image:  foxundermoon/rocketmq-3.2.6
    command:
      - sh
      - "-c"
      - "echo  brokerIP1=$$(curl ip.sb 2>/dev/null) >> /app/conf/broker.properties && sh /app/bin/mqbroker -n localhost:9876"
    networks:
      - rocket

networks:
  rocket:
    external: true
    name: host